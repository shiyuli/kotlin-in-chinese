<?xml version='1.0' encoding='utf-8'?>
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh" xml:lang="zh">
  <head>
    <title>动态类型</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta content="" name="description"/>
    <meta content="GitBook 3.2.2" name="generator"/>
    <meta content="huanglizhuo" name="author"/>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <link href="stylesheet.css" rel="stylesheet" type="text/css"/>
<link href="page_styles.css" rel="stylesheet" type="text/css"/>
</head>
  <body class="calibre">
        
<div class="page">
    
        <h1 class="book-chapter" id="calibre_toc_40">动态类型</h1>
        <div class="section">
            <h2 id="动态类型" class="calibre10">动态类型</h2>
<p class="calibre6">作为静态类型的语言，kotlin任然拥有与无类型或弱类型语言的调用，比如 javaScript。为了方便使用，<code class="calibre19 pcalibre6 pcalibre5">dynamic</code>应而生：</p>
<pre class="calibre17"><code class="lang-kotlin pcalibre4 pcalibre3"><span class="hljs-variable"><span class="hljs-keyword">val</span> dyn</span>: dynamic = ...
</code></pre>
<p class="calibre6"><code class="calibre19 pcalibre6 pcalibre5">dynamic</code> 类型关闭了 kotlin 的类型检查：</p>
<blockquote class="calibre18">
<p class="calibre6">这样的类型可以分配任意变量或者在任意的地方作为参数传递
任何值都可以分配为<code class="calibre19 pcalibre6 pcalibre5">dynamic</code> 类型，或者作为参数传递给任何接受 <code class="calibre19 pcalibre6 pcalibre5">dynamic</code> 类型参数的函数
这样的类型不做 null 检查</p>
</blockquote>
<p class="calibre6"><code class="calibre19 pcalibre6 pcalibre5">dynamic</code> 最奇特的特性就是可以在 <code class="calibre19 pcalibre6 pcalibre5">dynamic</code> 变量上调用任何属性或任何方法：
(The most peculiar feature of dynamic is that we are allowed to call any property or function with any parameters on a dynamic variable:)</p>
<pre class="calibre17"><code class="lang-kotlin pcalibre4 pcalibre3">dyn.whatever(<span class="hljs-params">1</span>, <span class="hljs-string">"foo"</span>, dyn) <span class="hljs-comment">// 'whatever' is not defined anywhere</span>
dyn.whatever(*array(<span class="hljs-params">1</span>, <span class="hljs-params">2</span>, <span class="hljs-params">3</span>))
</code></pre>
<p class="calibre6">在 javaScript 平台上这样的代码会编译为 'as is': <code class="calibre19 pcalibre6 pcalibre5">dyn.whatever(1)</code> 在 kotlin 中变成了 javaScript 中的代码
(On the JavaScript platform this code will be compiled “as is”: dyn.whatever(1) in Kotlin becomes dyn.whatever(1) in the generated JavaScript code.)</p>
<p class="calibre6">动态调用可以返回 <code class="calibre19 pcalibre6 pcalibre5">dynamic</code> 作为结果，因此我们可以轻松实现链式调用：</p>
<pre class="calibre17"><code class="lang-kotlin pcalibre4 pcalibre3">dyn.foo().bar.bat(<span class="hljs-params">0</span>
</code></pre>
<p class="calibre6">当给动态调用传递一个 lambda 表达式时，所有的参数默认都是 <code class="calibre19 pcalibre6 pcalibre5">dynamic</code>：</p>
<pre class="calibre17"><code class="lang-kotlin pcalibre4 pcalibre3">dyn.foo {
  x -&gt; x.bar() <span class="hljs-comment">// x is dynamic</span>
}
</code></pre>
<p class="calibre6">更多细节参看<a href="https://github.com/JetBrains/kotlin/blob/master/spec-docs/dynamic-types.md" target="_blank" class="calibre7 pcalibre2 pcalibre pcalibre1">spec document</a></p>

        </div>
    
</div>

        
    


</body></html>
